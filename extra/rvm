# RVM
# ~/.bash/ruby checks that RVM exists and is in good working order before
# sourcing this file, so no need to check for that here.

source "$HOME/.rvm/scripts/rvm"
# Add rvm ZSH completion script to $fpath so that compinit (autoload -U
# compinit && compinit) will load the script.
fpath=($fpath ~/.rvm/scripts/zsh/Completion)
autoload -U compinit && compinit

# RVM bash completion
# zsh comes with it baked in.
# For either one, use rvm[tab][tab], rvm use[tab][tab], etc.
# (No space, so NOT "rvm use [tab]")

ruby_version() {
  # rvm-prompt options:
  # i => interpreter ("ree", "ruby", "macruby")
  # v => version ("1.8.7", "0.6")
  # i + v => "ree-1.8.7" or "macruby-0.6"
  # g => gemset ("@rails3")
  # s => print "system" if using system intepreter (otherwise blank, for
  # 	   some reason)
  version=$(~/.rvm/bin/rvm-prompt i v g s) # with gemset
  # If using global gemset, show nothing
  version=${version/@global/}

  print "%{$fg[magenta]%}${version}%{$reset_color%}"
}
